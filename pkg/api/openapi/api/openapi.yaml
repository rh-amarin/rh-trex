openapi: 3.0.0
info:
  contact:
    name: HyperFleet Team
  description: |-
    HyperFleet API provides simple CRUD operations for managing cluster resources and their status history.

    **Architecture**: Simple CRUD only, no business logic, no event creation.
    Sentinel operator handles all orchestration logic.
    Adapters handle the specifics of managing spec
  title: HyperFleet API
  version: 1.0.0
servers:
- description: Development
  url: http://localhost:8000
tags:
- description: Status for NodePools
  name: NodePool statuses
- description: Status for Clusters
  name: Cluster statuses
- description: NodePool resource CRUD operations
  name: NodePools
- description: Cluster resource CRUD operations
  name: Clusters
paths:
  /api/hyperfleet/v1/clusters:
    get:
      operationId: getClusters
      parameters:
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClusterList"
          description: The request has succeeded.
      summary: List clusters
    post:
      description: |-
        Create a new cluster resource.

        **Note**: The `status` object in the response is read-only and computed by the service.
        It is NOT part of the request body. Initially, status.phase will be "NotReady" and
        status.adapters will be empty until adapters POST their status.
      operationId: postCluster
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ClusterCreateRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
          description: The request has succeeded.
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Cluster"
          description: The request has succeeded and a new resource has been created
            as a result.
      summary: Create cluster
  /api/hyperfleet/v1/clusters/{cluster_id}:
    get:
      operationId: getClusterById
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/getClusterById_200_response"
          description: The request has succeeded.
      summary: Get cluster by ID
  /api/hyperfleet/v1/clusters/{cluster_id}/nodepools:
    get:
      description: Returns the list of all nodepools for a cluster
      operationId: getNodePoolsByClusterId
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/getNodePoolsByClusterId_200_response"
          description: The request has succeeded.
      summary: List all nodepools for cluster
    post:
      description: Create a NodePool for a cluster
      operationId: createNodePool
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NodePoolCreateRequest"
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NodePoolCreateResponse"
          description: The request has succeeded and a new resource has been created
            as a result.
      summary: Create nodepool
  /api/hyperfleet/v1/clusters/{cluster_id}/nodepools/{nodepool_id}/statuses:
    get:
      description: Returns current status object for each adapter that has reported
        status
      operationId: getNodePoolsStatuses
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: nodepool_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/getNodePoolsStatuses_200_response"
          description: The request has succeeded.
        "404":
          description: The server cannot find the requested resource.
      summary: List all adapter statuses for nodepools
    post:
      description: "Adapter creates its initial status object for this cluster.\n\
        Returns 409 if adapter already has a status object for this cluster \n\nResponse\
        \ includes the status id and href for future operations.\nAdapter should store\
        \ the returned id/href to update its status later."
      operationId: postNodePoolStatuses
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: nodepool_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdapterStatusCreateRequest"
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdapterStatus"
          description: The request has succeeded and a new resource has been created
            as a result.
        "400":
          description: The server could not understand the request due to invalid
            syntax.
        "404":
          description: The server cannot find the requested resource.
        "409":
          description: The request conflicts with the current state of the server.
      summary: Create adapter status
  /api/hyperfleet/v1/clusters/{cluster_id}/nodepools/{nodepool_id}/statuses/{status_id}:
    get:
      description: Returns specific adapter status resource
      operationId: getNodePoolStatusById
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: nodepool_id
        required: true
        schema:
          type: string
        style: simple
      - description: Status ID
        explode: false
        in: path
        name: status_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdapterStatus"
          description: The request has succeeded.
        "404":
          description: The server cannot find the requested resource.
      summary: Get adapter status by ID
  /api/hyperfleet/v1/clusters/{cluster_id}/statuses:
    get:
      description: Returns current status object for each adapter that has reported
        status
      operationId: getClusterStatuses
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/getNodePoolsStatuses_200_response"
          description: The request has succeeded.
        "404":
          description: The server cannot find the requested resource.
      summary: List all adapter statuses for cluster
    post:
      description: "Adapter creates its initial status object for this cluster.\n\
        Returns 409 if adapter already has a status object for this cluster \n\nResponse\
        \ includes the status id and href for future operations.\nAdapter should store\
        \ the returned id/href to update its status later."
      operationId: postClusterStatuses
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdapterStatusCreateRequest"
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdapterStatus"
          description: The request has succeeded and a new resource has been created
            as a result.
        "400":
          description: The server could not understand the request due to invalid
            syntax.
        "404":
          description: The server cannot find the requested resource.
        "409":
          description: The request conflicts with the current state of the server.
      summary: Create adapter status
  /api/hyperfleet/v1/clusters/{cluster_id}/statuses/{status_id}:
    get:
      description: Returns specific adapter status resource
      operationId: getClusterStatusById
      parameters:
      - description: Cluster ID
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: Status ID
        explode: false
        in: path
        name: status_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdapterStatus"
          description: The request has succeeded.
        "404":
          description: The server cannot find the requested resource.
      summary: Get adapter status by ID
  /api/hyperfleet/v1/compatibility:
    get:
      description: Returns the list of all nodepools
      operationId: getCompatibility
      parameters:
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            text/plain:
              schema:
                type: string
          description: The request has succeeded.
      security:
      - BearerAuth: []
  /api/hyperfleet/v1/nodepools:
    get:
      description: Returns the list of all nodepools
      operationId: getNodePools
      parameters:
      - explode: false
        in: query
        name: search
        required: false
        schema:
          type: string
        style: form
      - explode: false
        in: query
        name: page
        required: false
        schema:
          default: 1
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: pageSize
        required: false
        schema:
          default: 20
          format: int32
          type: integer
        style: form
      - explode: false
        in: query
        name: orderBy
        required: false
        schema:
          default: created_at
          type: string
        style: form
      - explode: false
        in: query
        name: order
        required: false
        schema:
          $ref: "#/components/schemas/OrderDirection"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/getNodePoolsByClusterId_200_response"
          description: The request has succeeded.
      summary: List all nodepools for cluster
  /api/hyperfleet/v1/nodepools/{nodepool_id}:
    get:
      description: Returns specific nodepool
      operationId: getNodePoolById
      parameters:
      - description: NodePool ID
        explode: false
        in: path
        name: nodepool_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NodePool"
          description: The request has succeeded.
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
          description: The server cannot find the requested resource.
      summary: Get nodepool by ID
components:
  parameters:
    QueryParams.order:
      explode: false
      in: query
      name: order
      required: false
      schema:
        $ref: "#/components/schemas/OrderDirection"
      style: form
    QueryParams.orderBy:
      explode: false
      in: query
      name: orderBy
      required: false
      schema:
        default: created_at
        type: string
      style: form
    QueryParams.page:
      explode: false
      in: query
      name: page
      required: false
      schema:
        default: 1
        format: int32
        type: integer
      style: form
    QueryParams.pageSize:
      explode: false
      in: query
      name: pageSize
      required: false
      schema:
        default: 20
        format: int32
        type: integer
      style: form
    QueryParams.search:
      explode: false
      in: query
      name: search
      required: false
      schema:
        type: string
      style: form
  schemas:
    AdapterStatus:
      example:
        metadata:
          duration: duration
          job_namespace: job_namespace
          completed_at: 2000-01-23T04:56:07.000+00:00
          job_name: job_name
          started_at: 2000-01-23T04:56:07.000+00:00
          attempt: 2
        updated_at: 2000-01-23T04:56:07.000+00:00
        data:
          key: ""
        adapter_name: adapter_name
        kind: kind
        owner_references: ""
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        conditions:
        - reason: reason
          updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          type: type
          message: message
          observed_generation: 5
          status: "True"
        - reason: reason
          updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          type: type
          message: message
          observed_generation: 5
          status: "True"
        observed_generation: 5
        labels:
          key: labels
      properties:
        id:
          description: Resource identifier
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
        adapter_name:
          description: "Name of the adapter that generated this status (Validator,\
            \ DNS...)"
          type: string
        owner_references:
          allOf:
          - $ref: "#/components/schemas/ObjectReference"
          description: Reference to the cluster to which this adapter status pertains
        observed_generation:
          description: "Which generation for an entity (Clusters, NodePools) was current\
            \ at the time of creating this status"
          format: int32
          type: integer
        conditions:
          description: Kubernetes-style conditions tracking adapter state
          items:
            $ref: "#/components/schemas/Condition"
          type: array
        data:
          additionalProperties: {}
          description: Adapter-specific data (structure varies by adapter type)
          type: object
        metadata:
          $ref: "#/components/schemas/AdapterStatus_metadata"
      required:
      - adapter_name
      - conditions
      - created_at
      - labels
      - observed_generation
      - owner_references
      - updated_at
      type: object
    AdapterStatusCreateRequest:
      example:
        metadata:
          key: ""
        data:
          key: ""
        adapter_name: adapter_name
        conditions:
        - reason: reason
          updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          type: type
          message: message
          observed_generation: 5
          status: "True"
        - reason: reason
          updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          type: type
          message: message
          observed_generation: 5
          status: "True"
        observed_generation: 0
      properties:
        adapter_name:
          description: Adapter identifier
          type: string
        observed_generation:
          description: Which cluster generation this status reflects
          format: int32
          type: integer
        conditions:
          items:
            $ref: "#/components/schemas/Condition"
          type: array
        data:
          additionalProperties: {}
          description: Adapter-specific data
          type: object
        metadata:
          additionalProperties: {}
          description: Job execution metadata
          type: object
      required:
      - adapter_name
      - conditions
      - observed_generation
      type: object
    Cluster:
      example:
        generation: 0
        updated_at: 2000-01-23T04:56:07.000+00:00
        kind: Cluster
        name: name
        updated_by: updated_by
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        created_by: created_by
        spec:
          key: ""
        labels:
          key: labels
        status:
          phase: NotReady
          adapters:
          - type: Available
          - type: Available
          updated_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          observed_generation: 6
      properties:
        kind:
          default: Cluster
          type: string
        name:
          description: Cluster name (unique)
          type: string
        spec:
          additionalProperties: {}
          description: |-
            Cluster specification
            CLM doesn't know how to unmarshall the spec, it only stores and forwards to adapters to do their job
            But CLM will validate the schema before accepting the request
          type: object
        id:
          description: Resource identifier
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
        generation:
          description: "Generation field is updated on customer updates, reflecting\
            \ the version of the \"intent\" of the customer"
          format: int32
          type: integer
        status:
          $ref: "#/components/schemas/Cluster_status"
        created_by:
          type: string
        updated_by:
          type: string
      required:
      - created_at
      - created_by
      - generation
      - kind
      - labels
      - name
      - spec
      - status
      - updated_at
      - updated_by
      type: object
    ClusterCreateRequest:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        kind: Cluster
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        spec:
          key: ""
        labels:
          key: labels
      properties:
        kind:
          default: Cluster
          type: string
        name:
          description: Cluster name (unique)
          type: string
        spec:
          additionalProperties: {}
          description: |-
            Cluster specification
            CLM doesn't know how to unmarshall the spec, it only stores and forwards to adapters to do their job
            But CLM will validate the schema before accepting the request
          type: object
        id:
          description: Resource identifier
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
      required:
      - created_at
      - kind
      - labels
      - name
      - spec
      - updated_at
      type: object
    ClusterList:
      allOf:
      - $ref: "#/components/schemas/List"
      example:
        items:
        - generation: 0
          updated_at: 2000-01-23T04:56:07.000+00:00
          kind: Cluster
          name: name
          updated_by: updated_by
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          created_by: created_by
          spec:
            key: ""
          labels:
            key: labels
          status:
            phase: NotReady
            adapters:
            - type: Available
            - type: Available
            updated_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            observed_generation: 6
        - generation: 0
          updated_at: 2000-01-23T04:56:07.000+00:00
          kind: Cluster
          name: name
          updated_by: updated_by
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          created_by: created_by
          spec:
            key: ""
          labels:
            key: labels
          status:
            phase: NotReady
            adapters:
            - type: Available
            - type: Available
            updated_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            observed_generation: 6
      properties:
        items:
          items:
            $ref: "#/components/schemas/Cluster"
          type: array
      required:
      - items
      type: object
    Condition:
      example:
        reason: reason
        updated_at: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
        last_transition_time: 2000-01-23T04:56:07.000+00:00
        type: type
        message: message
        observed_generation: 5
        status: "True"
      properties:
        type:
          type: string
        status:
          description: Condition status
          enum:
          - "True"
          - "False"
          - Unknown
          type: string
        reason:
          description: Machine-readable reason code
          type: string
        message:
          description: Human-readable message
          type: string
        observed_generation:
          format: int32
          type: integer
        created_at:
          description: "Time when the condition was created \n- In an adapter reporting\
            \ conditions `updated_at==created_at`\n- In the API, `created_at` doesn't\
            \ change with new updates from adapters"
          format: date-time
          type: string
        updated_at:
          description: Time when the condition was updated
          format: date-time
          type: string
        last_transition_time:
          description: When this condition last transitioned (computed by service
            when status changes)
          format: date-time
          type: string
      required:
      - created_at
      - observed_generation
      - status
      - type
      - updated_at
      type: object
    ConditionAvailable:
      allOf:
      - $ref: "#/components/schemas/ConditionBase"
      description: |-
        StatusAvailable is the status condition from an adapter that is used by CLM to compute the phase.
        `phase=ready` when all adaptors report `Available=true`
      example:
        type: Available
      properties:
        type:
          enum:
          - Available
          type: string
      required:
      - type
      type: object
    ConditionBase:
      description: |-
        Common data for status objects, part of:
        - Status entity (stored in DB)
        - Request payload
      properties:
        type:
          type: string
        status:
          description: Condition status
          enum:
          - "True"
          - "False"
          - Unknown
          type: string
        reason:
          description: Machine-readable reason code
          type: string
        message:
          description: Human-readable message
          type: string
        observed_generation:
          format: int32
          type: integer
        created_at:
          description: "Time when the condition was created \n- In an adapter reporting\
            \ conditions `updated_at==created_at`\n- In the API, `created_at` doesn't\
            \ change with new updates from adapters"
          format: date-time
          type: string
        updated_at:
          description: Time when the condition was updated
          format: date-time
          type: string
      required:
      - created_at
      - observed_generation
      - status
      - type
      - updated_at
      type: object
    Error:
      example:
        reason: reason
        code: code
        kind: kind
        operation_id: operation_id
        id: id
        href: href
      properties:
        id:
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
        code:
          type: string
        reason:
          type: string
        operation_id:
          type: string
      type: object
    List:
      properties:
        kind:
          type: string
        page:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        total:
          format: int32
          type: integer
        items:
          items: {}
          type: array
      required:
      - items
      - kind
      - page
      - size
      - total
      type: object
    NodePool:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        kind: kind
        owner_references:
          kind: kind
          id: id
          href: href
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        spec:
          key: ""
        labels:
          key: labels
        status:
          phase: NotReady
          adapters:
          - type: Available
          - type: Available
          updated_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          observed_generation: 5
      properties:
        id:
          description: Resource identifier
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
        name:
          description: NodePool name (unique in a cluster)
          type: string
        spec:
          additionalProperties: {}
          description: |-
            Cluster specification
            CLM doesn't know how to unmarshall the spec, it only stores and forwards to adapters to do their job
            But CLM will validate the schema before accepting the request
          type: object
        owner_references:
          $ref: "#/components/schemas/ObjectReference"
        status:
          $ref: "#/components/schemas/NodePool_status"
      required:
      - created_at
      - labels
      - name
      - owner_references
      - spec
      - status
      - updated_at
      type: object
    NodePoolCreateRequest:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        kind: kind
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        spec:
          key: ""
        labels:
          key: labels
      properties:
        id:
          description: Resource identifier
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
        name:
          description: NodePool name (unique in a cluster)
          type: string
        spec:
          additionalProperties: {}
          description: |-
            Cluster specification
            CLM doesn't know how to unmarshall the spec, it only stores and forwards to adapters to do their job
            But CLM will validate the schema before accepting the request
          type: object
      required:
      - created_at
      - labels
      - name
      - spec
      - updated_at
      type: object
    NodePoolCreateResponse:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        kind: kind
        owner_references:
          kind: kind
          id: id
          href: href
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        href: href
        spec:
          key: ""
        labels:
          key: labels
        status:
          phase: NotReady
          adapters:
          - type: Available
          - type: Available
          updated_at: 2000-01-23T04:56:07.000+00:00
          last_transition_time: 2000-01-23T04:56:07.000+00:00
          observed_generation: 5
      properties:
        id:
          description: Resource identifier
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
        labels:
          additionalProperties:
            type: string
          description: labels for the API resource as pairs of name:value strings
          type: object
        created_at:
          format: date-time
          type: string
        updated_at:
          format: date-time
          type: string
        name:
          description: NodePool name (unique in a cluster)
          type: string
        spec:
          additionalProperties: {}
          description: |-
            Cluster specification
            CLM doesn't know how to unmarshall the spec, it only stores and forwards to adapters to do their job
            But CLM will validate the schema before accepting the request
          type: object
        owner_references:
          $ref: "#/components/schemas/ObjectReference"
        status:
          $ref: "#/components/schemas/NodePool_status"
      required:
      - created_at
      - labels
      - name
      - owner_references
      - spec
      - status
      - updated_at
      type: object
    ObjectReference:
      example:
        kind: kind
        id: id
        href: href
      properties:
        id:
          description: Resource identifier
          type: string
        kind:
          description: Resource kind
          type: string
        href:
          description: Resource URI
          type: string
      type: object
    OrderDirection:
      enum:
      - asc
      - desc
      type: string
    getClusterById_200_response:
      anyOf:
      - $ref: "#/components/schemas/Cluster"
      - $ref: "#/components/schemas/Error"
    getNodePoolsByClusterId_200_response:
      example:
        total: 1
        size: 6
        page: 0
        items:
        - updated_at: 2000-01-23T04:56:07.000+00:00
          kind: kind
          owner_references:
            kind: kind
            id: id
            href: href
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          spec:
            key: ""
          labels:
            key: labels
          status:
            phase: NotReady
            adapters:
            - type: Available
            - type: Available
            updated_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            observed_generation: 5
        - updated_at: 2000-01-23T04:56:07.000+00:00
          kind: kind
          owner_references:
            kind: kind
            id: id
            href: href
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          spec:
            key: ""
          labels:
            key: labels
          status:
            phase: NotReady
            adapters:
            - type: Available
            - type: Available
            updated_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            observed_generation: 5
      properties:
        page:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        total:
          format: int32
          type: integer
        items:
          items:
            $ref: "#/components/schemas/NodePool"
          type: array
      required:
      - items
      - page
      - size
      - total
      type: object
    getNodePoolsStatuses_200_response:
      example:
        total: 1
        size: 6
        page: 0
        items:
        - metadata:
            duration: duration
            job_namespace: job_namespace
            completed_at: 2000-01-23T04:56:07.000+00:00
            job_name: job_name
            started_at: 2000-01-23T04:56:07.000+00:00
            attempt: 2
          updated_at: 2000-01-23T04:56:07.000+00:00
          data:
            key: ""
          adapter_name: adapter_name
          kind: kind
          owner_references: ""
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          conditions:
          - reason: reason
            updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            type: type
            message: message
            observed_generation: 5
            status: "True"
          - reason: reason
            updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            type: type
            message: message
            observed_generation: 5
            status: "True"
          observed_generation: 5
          labels:
            key: labels
        - metadata:
            duration: duration
            job_namespace: job_namespace
            completed_at: 2000-01-23T04:56:07.000+00:00
            job_name: job_name
            started_at: 2000-01-23T04:56:07.000+00:00
            attempt: 2
          updated_at: 2000-01-23T04:56:07.000+00:00
          data:
            key: ""
          adapter_name: adapter_name
          kind: kind
          owner_references: ""
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          href: href
          conditions:
          - reason: reason
            updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            type: type
            message: message
            observed_generation: 5
            status: "True"
          - reason: reason
            updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            last_transition_time: 2000-01-23T04:56:07.000+00:00
            type: type
            message: message
            observed_generation: 5
            status: "True"
          observed_generation: 5
          labels:
            key: labels
      properties:
        page:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        total:
          format: int32
          type: integer
        items:
          items:
            $ref: "#/components/schemas/AdapterStatus"
          type: array
      required:
      - items
      - page
      - size
      - total
      type: object
    AdapterStatus_metadata:
      description: Metadata about the adapter job/execution
      example:
        duration: duration
        job_namespace: job_namespace
        completed_at: 2000-01-23T04:56:07.000+00:00
        job_name: job_name
        started_at: 2000-01-23T04:56:07.000+00:00
        attempt: 2
      properties:
        job_name:
          type: string
        job_namespace:
          type: string
        attempt:
          format: int32
          type: integer
        started_at:
          format: date-time
          type: string
        completed_at:
          format: date-time
          type: string
        duration:
          type: string
      type: object
    Cluster_status:
      description: |-
        Cluster status aggregation from all adapters.

        This object is computed by the service and CANNOT be modified directly.
        It is aggregated from adapter status updates posted to `/clusters/{id}/statuses`.

        Provides quick overview of which adapters have reported and aggregated phase.
      example:
        phase: NotReady
        adapters:
        - type: Available
        - type: Available
        updated_at: 2000-01-23T04:56:07.000+00:00
        last_transition_time: 2000-01-23T04:56:07.000+00:00
        observed_generation: 6
      properties:
        phase:
          description: |-
            Current cluster phase (native database column).
            Updated when adapters report status.
            Note: status.phase provides aggregated view from all adapter conditions.
          enum:
          - NotReady
          - Ready
          - Failed
          type: string
        last_transition_time:
          description: |-
            When cluster last transitioned (updated by adapters, used by Sentinel for backoff)
            Updated when adapters report status if the phase changes
          format: date-time
          type: string
        observed_generation:
          description: |-
            Last generation processed by adapters
            Updated when adapters report status.
            This will be the lowest value of each adapter's observed_generation values
            The phase value is based on this generation
          format: int32
          type: integer
        updated_at:
          description: |-
            Time of the last complete report from adapters
            Updated when adapters report status.
            Oldest `updated_at` from the adapter conditions
          format: date-time
          type: string
        adapters:
          items:
            $ref: "#/components/schemas/ConditionAvailable"
          type: array
      required:
      - adapters
      - last_transition_time
      - observed_generation
      - phase
      - updated_at
      type: object
    NodePool_status:
      example:
        phase: NotReady
        adapters:
        - type: Available
        - type: Available
        updated_at: 2000-01-23T04:56:07.000+00:00
        last_transition_time: 2000-01-23T04:56:07.000+00:00
        observed_generation: 5
      properties:
        phase:
          description: |-
            Current NodePool phase (native database column).
            Updated when adapters report status.
            Note: status.phase provides aggregated view from all adapter conditions.
          enum:
          - NotReady
          - Ready
          - Failed
          type: string
        observed_generation:
          description: |-
            Last generation processed by adapters
            Updated when adapters report status.
            This will be the lowest value of each adapter's observed_generation values
            The phase value is based on this generation
          format: int32
          type: integer
        last_transition_time:
          description: "When NodePool last transitioned (updated by adapters, used\
            \ by Sentinel for backoff)"
          format: date-time
          type: string
        updated_at:
          description: |-
            Time of the last complete report from adapters
            Updated when adapters report status.
            Oldest `updated_at` from the adapter conditions
          format: date-time
          type: string
        adapters:
          items:
            $ref: "#/components/schemas/ConditionAvailable"
          type: array
      required:
      - adapters
      - last_transition_time
      - observed_generation
      - phase
      - updated_at
      type: object
  securitySchemes:
    BearerAuth:
      scheme: Bearer
      type: http
